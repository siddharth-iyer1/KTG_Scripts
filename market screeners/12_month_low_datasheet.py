# -*- coding: utf-8 -*-
"""12 month low datasheet

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1RejGy0RmUemq6jG4A-xR0qakfXzAJeoR
"""

!pip3 install yfinance

# import necessary libraries
import pandas as pd
import numpy as np
import math
import matplotlib.dates as mpl_dates
import matplotlib.pyplot as plt
import yfinance as yf
from tqdm import tqdm

Tickers = ["A","AA","AAP","AB","ABB","ABBV","ABC","ABEV","ABG","ABM","ABR","ABT","ACA","ACC","ACH","ACI","ACM","ACN","ADC","ADM","ADNT","ADT","AEE","AEG","AEL","AEM","AEO","AER","AES","AFG","AFL","AG","AGCO","AGI","AGL","AGO","AGR","AGTI","AIG","AIN","AIRC","AIT","AIZ","AJG","AJRD","AL","ALB","ALC","ALE","ALIT","ALK","ALL","ALLE","ALLY","ALSN","ALV","AM","AMBP","AMC","AMCR","AME","AMG","AMH","AMN","AMOV","AMP","AMR","AMRC","AMT","AMX","AN","ANET","ANTM","AON","AOS","APAM","APD","APG","APH","APLE","APO","APTV","AQN","AQUA","AR","ARCH","ARE","ARES","ARMK","ARNC","ARW","ASAI","ASAN","ASB","ASGN","ASH","ASR","ASX","ATC","ATCO","ATHM","ATI","ATKR","ATO","ATR","ATUS","AU","AUY","AVA","AVAL","AVB","AVLR","AVNT","AVTR","AVY","AWI","AWK","AWR","AX","AXP","AXS","AXTA","AYI","AYX","AZEK","AZO","BA","BABA","BAC","BAH","BAK","BALL","BAM","BAP","BAX","BB","BBD","BBDO","BBVA","BBWI","BBY","BC","BCC","BCE","BCH","BCO","BCS","BDC","BDX","BE","BEKE","BEN","BEP","BEPC","BERY","BFAM","BFH","BG","BHC","BHP","BHVN","BILL","BIO","BIP","BIPC","BJ","BK","BKH","BKI","BKU","BLCO","BLD","BLDR","BLK","BMI","BMO","BMY","BNL","BNS","BOH","BOOT","BOX","BP","BR","BRBR","BRC","BRFS","BRO","BRX","BSAC","BSBR","BSM","BSMX","BSX","BTI","BTU","BUD","BURL","BWA","BWXT","BX","BXMT","BXP","BXSL","BYD","C","CABO","CACI","CADE","CAE","CAG","CAH","CAJ","CALX","CARR","CAT","CB","CBRE","CBT","CBU","CC","CCCS","CCI","CCJ","CCK","CCL","CCU","CDAY","CE","CEA","CEQP","CF","CFG","CFR","CGAU","CHD","CHE","CHGG","CHH","CHPT","CHT","CHWY","CI","CIB","CIEN","CIG","CIVI","CIXX","CL","CLF","CLH","CLR","CLVT","CLX","CM","CMA","CMC","CMG","CMI","CMS","CMTG","CNA","CNC","CNHI","CNI","CNMD","CNO","CNP","CNQ","CNR","CNS","CNX","COF","COLD","COO","COP","COTY","COUR","CP","CPA","CPB","CPE","CPG","CPK","CPNG","CPRI","CPT","CR","CRC","CRH","CRI","CRK","CRL","CRM","CS","CSAN","CSL","CTLT","CTRA","CTVA","CUBE","CUK","CUZ","CVE","CVI","CVNA","CVS","CVX","CW","CWAN","CWEN","CWK","CWT","CX","CXM","D","DAL","DAR","DASH","DAVA","DB","DBRG","DCI","DCP","DD","DDS","DE","DECK","DEI","DELL","DEN","DEO","DFS","DG","DGX","DHI","DHR","DINO","DIS","DKS","DLB","DLR","DNA","DNB","DNP","DOC","DOCN","DOCS","DOV","DOW","DPZ","DQ","DRE","DRI","DT","DTE","DTM","DUK","DV","DVA","DVN","DXC","DY","E","EBR","EC","ECL","ED","EDR","EDU","EFX","EGP","EHC","EIX","EL","ELAN","ELP","ELS","ELY","EME","EMN","EMR","ENB","ENLC","ENOV","ENS","ENV","EOG","EPAM","EPD","EPR","EPRT","EQC","EQH","EQNR","EQR","EQT","ERF","ES","ESAB","ESI","ESMT","ESNT","ESS","ESTC","ET","ETN","ETR","ETRN","ETWO","EURN","EVA","EVH","EVR","EVRG","EVTC","EW","EXG","EXP","EXR","F","FAF","FBHS","FBP","FCN","FCPT","FCX","FDX","FE","FERG","FHI","FHN","FICO","FIS","FIX","FL","FLO","FLR","FLS","FLT","FMC","FMS","FMX","FN","FNB","FND","FNF","FNV","FR","FRC","FRGE","FRT","FSK","FSR","FSS","FTCH","FTI","FTS","FTV","FUL","FUN","G","GATX","GBCI","GCP","GD","GDDY","GE","GEF","GFI","GFL","GGB","GGG","GHC","GIB","GIL","GIS","GKOS","GL","GLOB","GLW","GM","GME","GMED","GNRC","GOL","GOLD","GOLF","GPC","GPI","GPK","GPN","GPS","GRMN","GS","GSK","GTES","GTLS","GWRE","GWW","GXO","H","HAE","HAL","HASI","HAYW","HBI","HCA","HD","HDB","HE","HEI","HEP","HES","HGV","HHC","HI","HIG","HII","HIW","HL","HLF","HLI","HLIO","HLT","HMC","HMY","HNP","HOG","HOMB","HP","HPE","HPP","HPQ","HR","HRB","HRI","HRL","HSBC","HSY","HTA","HUBB","HUBS","HUM","HUN","HWM","HXL","IAA","IBM","IBN","IBP","ICE","ICL","IDA","IEX","IFF","IFS","IGT","IHG","IHS","IIPR","INFA","INFY","ING","INGR","INSP","INST","INVH","IOT","IP","IPG","IQV","IR","IRM","IRT","IS","IT","ITCB","ITGR","ITT","ITUB","ITW","IVZ","IX","J","JBGS","JBL","JBT","JCI","JEF","JHG","JHX","JKS","JLL","JNJ","JNPR","JOBY","JOE","JPM","JWN","JXN","K","KAI","KB","KBH","KBR","KD","KEN","KEP","KEX","KEY","KEYS","KFY","KGC","KIM","KKR","KMB","KMI","KMPR","KMX","KNSL","KNX","KO","KOF","KOS","KR","KRC","KRG","KRO","KSS","KT","KW","KWR","L","LAC","LAD","LAZ","LBRT","LCII","LDOS","LEA","LEG","LEN","LEVI","LFC","LH","LHX","LII","LIN","LLY","LMT","LNC","LOW","LPL","LPX","LSI","LSPD","LTH","LTHM","LU","LUMN","LUV","LVS","LW","LXP","LYB","LYG","LYV","M","MA","MAA","MAIN","MAN","MAS","MATX","MC","MCD","MCK","MCO","MCW","MCY","MDC","MDT","MDU","MED","MET","MFC","MFG","MGA","MGM","MGY","MHK","MKC","MKL","MLI","MLM","MMC","MMM","MMP","MMS","MNSO","MO","MOH","MOS","MP","MPC","MPLN","MPLX","MPW","MRK","MRO","MS","MSA","MSCI","MSGS","MSI","MSM","MSP","MT","MTB","MTD","MTDR","MTG","MTH","MTN","MTOR","MTZ","MUFG","MUR","MUSA","NAD","NAPA","NCLH","NCR","NE","NEA","NEE","NEM","NEP","NET","NEU","NEWR","NEX","NFG","NGG","NGVT","NHI","NI","NIO","NJR","NKE","NLSN","NLY","NMR","NNI","NNN","NOC","NOG","NOK","NOMD","NOV","NOVA","NOW","NRG","NRZ","NSA","NSC","NSP","NTCO","NTR","NU","NUE","NUS","NVG","NVO","NVR","NVS","NVST","NVT","NWG","NYCB","NYT","O","OC","OFC","OGE","OGN","OGS","OHI","OI","OKE","OLN","OMC","OMF","OMI","ONON","ONTO","OR","ORA","ORAN","ORCC","ORCL","ORI","OSH","OSK","OTIS","OUT","OVV","OWL","OXY","PAC","PAG","PAGS","PATH","PAYC","PB","PBA","PBF","PBH","PBR","PCG","PCOR","PD","PDI","PDO","PEAK","PEB","PEG","PEN","PFE","PFGC","PFSI","PG","PGR","PH","PHG","PHI","PHM","PII","PINS","PJT","PK","PKG","PKI","PKX","PLAN","PLD","PLNT","PLTR","PM","PNC","PNM","PNR","PNW","POR","POST","PPG","PPL","PRGO","PRI","PRMW","PRU","PSA","PSB","PSN","PSO","PSTG","PSTH","PSX","PTR","PUK","PVH","PWR","PWSC","PXD","QGEN","QS","QSR","QTWO","R","RACE","RBA","RBLX","RCI","RCL","RDN","RDY","RE","RELX","REXR","REZI","RF","RGA","RH","RHI","RHP","RIG","RIO","RJF","RL","RLI","RLX","RMD","RNG","RNR","ROG","ROK","ROL","ROP","RPM","RRC","RRX","RS","RSG","RTX","RVLV","RY","RYAN","RYN","S","SAFE","SAIC","SAIL","SAM","SAN","SAP","SAVE","SBS","SBSW","SCCO","SCHW","SCI","SCL","SE","SEAS","SEE","SEM","SF","SFBS","SGFY","SGHC","SHEL","SHG","SHI","SHLX","SHO","SHOP","SHW","SID","SIG","SITC","SITE","SJI","SJM","SJR","SKM","SKX","SKY","SLB","SLF","SLG","SM","SMAR","SMFG","SMG","SNA","SNAP","SNDR","SNN","SNOW","SNP","SNV","SNX","SO","SON","SONY","SPB","SPG","SPGI","SPOT","SPR","SPXC","SQM","SQSP","SR","SRC","SRE","SSD","SSL","ST","STAG","STE","STLA","STM","STN","STNG","STOR","STT","STVN","STWD","STZ","SU","SUI","SUM","SUN","SUZ","SWCH","SWK","SWN","SWX","SXT","SYF","SYK","SYY","T","TAC","TAK","TAL","TAP","TCN","TD","TDC","TDG","TDOC","TDY","TECK","TEF","TEL","TEO","TEVA","TFC","TFII","TFX","TGNA","TGT","THC","THG","THO","THS","TIMB","TIXT","TJX","TKC","TKR","TLK","TM","TME","TMHC","TMO","TMX","TNET","TNL","TOL","TOST","TPL","TPR","TPX","TR","TREX","TRGP","TRI","TRNO","TROX","TRP","TRQ","TRTN","TRU","TRV","TS","TSM","TSN","TT","TTC","TTE","TTM","TU","TV","TWLO","TWTR","TX","TXT","TYL","U","UA","UAA","UBER","UBS","UDR","UGI","UGP","UHS","UI","UL","UMC","UNF","UNFI","UNH","UNM","UNP","UNVR","UPS","URI","USB","USFD","USM","UTF","V","VAC","VAL","VALE","VEEV","VET","VFC","VICI","VIPS","VIV","VLO","VMC","VMI","VMW","VNO","VNT","VOYA","VRT","VSCO","VSH","VST","VTR","VVV","W","WAB","WAL","WAT","WBS","WBT","WCC","WCN","WD","WDS","WE","WEC","WELL","WES","WEX","WF","WFC","WFG","WH","WHD","WHR","WIT","WK","WLK","WLL","WLY","WLYB","WM","WMB","WMS","WMT","WNS","WOLF","WPC","WPM","WPP","WRB","WRK","WSM","WSO","WST","WTM","WTRG","WTS","WU","WWE","WY","X","XOM","XPEV","XPO","XYL","Y","YELP","YETI","YMM","YUM","YUMC","ZBH","ZEN","ZGN","ZIM","ZIP","ZNH","ZTO","ZTS","ZWS"]
Prev_Clos = []
Year_Low = []
Volume = []
print(len(Tickers))

for i in tqdm (range(1196)):
  df = yf.download(Tickers[i], start="2021-06-21",
                    end="2022-06-21")
  # Find yearly low and previous day's close
  if(len(df['Low']) >= 50):
    low = min(df['Low'])
    close = df['Adj Close'][0]
    vol = df['Volume'][0]

    Year_Low.append(low)
    Prev_Clos.append(close)
    Volume.append(vol)

PC = np.array(Prev_Clos)
YL = np.array(Year_Low)

df

Dictionary = {};

Dictionary['Tickers'] = Tickers
Dictionary['Previous Day Close'] = Prev_Clos
Dictionary['12 Month Low'] = Year_Low
Dictionary['Prev Close - 12 Month Low'] = PC - YL
Dictionary['% Difference'] = 100*((PC - YL)/(PC))
Dictionary['Vol'] = Volume

dataset = pd.DataFrame.from_dict(Dictionary)

dataset
final = dataset[dataset['% Difference'] <= 5]
final = final[dataset['% Difference'] >= 2.5]
final = final[dataset['Previous Day Close'] >= 20]
final = final[dataset['Vol'] >= 1000000]

pd.set_option("display.max_rows", None, "display.max_columns", None)
final

